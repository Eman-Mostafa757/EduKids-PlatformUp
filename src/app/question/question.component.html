
<div [ngClass]="{'timer': true, 'warning': warningStarted}" *ngIf="!timeUp">
  โณ ุงูููุช ุงููุชุจูู: {{ formattedTime }}
</div>

<button class="back-button" (click)="goBack()">ุฎุฑูุฌ</button>

<div *ngIf="!timeUp && filteredQuestions.length > 0" class="question-box">

  <ng-container *ngIf="filteredQuestions[currentQuestionIndex]?.language === 'ar-EG'; else englishTitle">
    <h1>ุงูุณุคุงู {{getArabicQuestionNumber(currentQuestionIndex + 1) }}</h1>
  </ng-container>

  <ng-template #englishTitle>
    <h1>Question {{ currentQuestionIndex + 1 }}</h1>
  </ng-template>

<h2 class="question-text" *ngIf="filteredQuestions[currentQuestionIndex]?.content?.text">
  <span [innerHTML]="filteredQuestions[currentQuestionIndex]?.content?.text | fraction"></span>
</h2>




  <!-- ุนุฑุถ ุงููุต ูุงูุตูุฑุฉ ูุนูุง ุฏุงุฎู ุงูุณุคุงู -->
  <div class="question-media">
    <img *ngIf="filteredQuestions[currentQuestionIndex]?.content?.image" 
         [src]="filteredQuestions[currentQuestionIndex].content.image" 
         alt="Question Image" 
         class="question-image">
  </div>

 

  <button class="read-button" (click)="speakQuestion()">
    ๐ {{ filteredQuestions[currentQuestionIndex]?.language === 'ar-EG' ? 'ุงูุฑุฃ ุงูุณุคุงู' : 'Read Question' }}
  </button>
  
  <div class="options">
    <button class="option-button" 
            *ngFor="let option of filteredQuestions[currentQuestionIndex]?.options"
            [disabled]="showFeedback" 
            (click)="checkAnswer(option.value)">
      
      <ng-container [ngSwitch]="option.type">
      <span *ngSwitchCase="'text'" [innerHTML]="option.value | fraction"></span>

        <img *ngSwitchCase="'image'" [src]="option.value" alt="Option Image" class="option-image">
      </ng-container>

    </button>
  </div>

  <div class="feedback" *ngIf="showFeedback">
    <p [ngClass]="isCorrectAnswer ? 'correct' : 'wrong'">
      {{ isCorrectAnswer ? 'โ ุฅุฌุงุจุฉ ุตุญูุญุฉ' : 'โ ุฎุทุฃ! ุฌุฑูุจ ุชุงูู.' }}
    </p>
    <div class="reward" *ngIf="showReward">
      <img src="assets/images/party.png" alt="Star" class="rewarded-img" />
    </div>
  </div>
<!-- 
<button *ngIf="isCorrectAnswer" class="next-button" (click)="nextQuestion()">ุงูุชุงูู โก๏ธ</button> -->
  <div class="navigation-buttons">
    <div class="spacer">
      <button (click)="previousQuestion()" *ngIf="currentQuestionIndex > 0" class="previous-button" >โฌ๏ธ ุงูุณุงุจู</button>
    </div>
    <div>
      <button *ngIf="isCorrectAnswer" class="next-button" (click)="nextQuestion()">ุงูุชุงูู โก๏ธ</button>
    </div>
  
  </div>
  
</div>

<!-- ูู ุญุงูุฉ ุนุฏู ูุฌูุฏ ุฃุณุฆูุฉ -->
<div *ngIf="filteredQuestions.length === 0" class="not_Found">
  <p>๐ฅูุง ุชูุฌุฏ ุฃุณุฆูุฉ ููุฐู ุงููุงุฏุฉ ุญุงููุงู </p>
</div>

<!-- ูู ุญุงูุฉ ุงูุชูุงุก ุงูููุช -->
<div *ngIf="timeUp && !examCompleted" class="time-up-message">
  <img src="assets/images/2.png" alt="Time's up" class="reward-img" style="width: 150px; margin-bottom: 6px;">
  <h1 style="color: #f1eaea;">โฐ   ุงูููุช ุฎูุต</h1>
  <p style="font-size: 22px; margin-top: 2px; color: #f1eaea;" > ๐ ููุง ูููู ... ุชูุฏุฑ ุชุญุงูู ุชุงูู</p>
  <p style="font-size: 20px; color: #f1eaea;">  ๐ ุงูุชุฌุฑุจุฉ ุฃูู ูู ุงููุชูุฌุฉ</p>
  <button class="retry-button" (click)="restartExam()"> ๐ ุฌุฑูุจ ุชุงูู</button>
</div>




<div *ngIf="examCompleted" class="completion-message">
  <audio *ngIf="examCompleted" autoplay>
    <source src="assets/audio/kids-happy-music-329738-[AudioTrimmer.com].mp3" type="audio/mp3" />
  
  </audio>
  <img src="assets/images/1.png" alt="Trophy" class="reward-img" />
  <h2>๐ ๐ ุฎูุตุช ุงูุงูุชุญุงู </h2>
  <h3>๐ ุฃุญุณูุช </h3>

  <!-- ุฑุณุงูุฉ ุงูุชููุฆุฉ ูุน ุงูุฃููููุดู -->
</div>
<div class="congratulation-message">
  <!-- <h1>ููุชุงุงุงุฒ! ุฃูุช ูุฌู ุณุงุทุน! โญ๐</h1> -->
  <div class="balloons">
    <img 
      *ngFor="let balloon of balloons" 
      src="assets/images/ุจุงูููุฉ-removebg-preview.png" 
      alt="Balloon"
      class="balloon"
      [style.left.%]="balloon.left"
      [style.animationDuration.s]="balloon.duration"
    />
  </div>
  
</div>